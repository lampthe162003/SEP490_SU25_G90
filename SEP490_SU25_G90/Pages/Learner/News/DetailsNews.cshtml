@page
@model SEP490_SU25_G90.Pages.Learner.News.DetailsNewsModel
@{
    ViewData["Title"] = "Chi tiết thông báo";
    Layout = "_HomeLayout";
}

@section Styles {
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />
    <link href="~/css/details-news-learner.css" rel="stylesheet" />

    <style>
        /* Overlay toàn màn hình cho ảnh */
        #imageOverlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: none; /* ẩn mặc định */
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }

            #imageOverlay img {
                max-width: 90%;
                max-height: 90%;
                border-radius: 10px;
                transition: transform 0.3s ease;
            }

                #imageOverlay img:hover {
                    transform: scale(1.05);
                }

        /* Đổi cursor để nhận biết click được */
        .news-image {
            cursor: pointer;
            max-height: 400px;
            object-fit: cover;
            border-radius: 5px;
            width: 100%;
        }
    </style>
}

<div class="news-detail-container">
    <a asp-page="/Learner/News/ListNews" class="back-to-list">
        <i class="bi bi-arrow-left"></i> Quay lại danh sách thông báo
    </a>

    <h1 class="news-title">@Html.Raw(Model.News.Title)</h1>

    <div class="news-meta">
        <span><i class="bi bi-person-circle"></i> @Model.News.AuthorName</span>
        <span><i class="bi bi-clock"></i> @Model.News.PostTime?.ToString("dd/MM/yyyy")</span>
    </div>

    @if (!string.IsNullOrEmpty(Model.News.Image))
    {
        <div class="news-image-wrapper">
            <img id="newsImage" src="@Model.News.Image" class="news-image" alt="Ảnh tin tức" />
        </div>
    }

    <div class="news-content">
        @Html.Raw(Model.News.NewsContent)
    </div>
</div>

<!-- Overlay để phóng to ảnh -->
<div id="imageOverlay">
    <img src="" alt="Zoomed Image" />
</div>

@section Scripts {
    <script>
        const newsImage = document.getElementById('newsImage');
        const overlay = document.getElementById('imageOverlay');
        const overlayImg = overlay.querySelector('img');

        if(newsImage){
            // Click vào ảnh nhỏ để mở overlay
            newsImage.addEventListener('click', () => {
                overlay.style.display = 'flex';
                overlayImg.src = newsImage.src;
            });
        }

        // Click vào overlay để đóng
        overlay.addEventListener('click', () => {
            overlay.style.display = 'none';
        });
    </script>
}
