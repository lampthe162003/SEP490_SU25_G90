@page "/Instructor/Schedule"
@model SEP490_SU25_G90.Pages.Instructors.InstructorScheduleModel
@using SEP490_SU25_G90.vn.edu.fpt.MappingObjects

@{
    ViewData["Title"] = "Thời khóa biểu giảng viên";
    Layout = "~/Pages/Shared/_InstructorLayout.cshtml";
    var weekRange = $"Tuần ({Model.StartOfWeek:dd/MM} - {Model.EndOfWeek:dd/MM})";
    var weekdays = new[] { "Thứ 2", "Thứ 3", "Thứ 4", "Thứ 5", "Thứ 6", "Thứ 7", "Chủ nhật" };
}

<h2 class="mb-4">@ViewData["Title"]</h2>
<h5 class="mb-4 text-muted">@weekRange</h5>

<table class="table table-bordered text-center">
    <thead class="table-primary">
        <tr>
            <th style="width: 100px">Slot</th>
            @for (int i = 0; i < Model.DatesOfWeek.Count; i++)
            {
                <th>@weekdays[i]<br /><span class="text-muted">@Model.DatesOfWeek[i].ToString("dd/MM")</span></th>
            }
        </tr>
    </thead>
    <tbody>
        @for (int slot = 0; slot < 4; slot++)
        {
            string timeRange = slot switch
            {
                0 => "07:30 - 09:00",
                1 => "09:15 - 10:45",
                2 => "14:00 - 15:30",
                3 => "15:45 - 17:15",
                _ => ""
            };
            <tr>
                <td>
                    <b>Slot @slot</b><br />
                    <span class="text-muted">@timeRange</span>
                </td>
                @for (int day = 0; day < 7; day++)
                {
                    var date = Model.DatesOfWeek[day];
                    var schedule = Model.ScheduleData.FirstOrDefault(x => x.ScheduleDate == date && x.SlotId == slot);
                    <td>
                        @if (schedule != null)
                        {
                            <div><b>@schedule.ClassName</b></div>
                        }
                        else
                        {
                            <span>-</span>
                        }
                    </td>
                }
            </tr>
        }
    </tbody>
</table>

@section Styles {
    <style>
        table th, table td {
            vertical-align: middle;
        }
    </style>
}
