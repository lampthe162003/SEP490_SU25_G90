@page
@model SEP490_SU25_G90.Pages.AcademicAffairs.News.DetailsNewsModel

@{
    ViewData["Title"] = "Chi tiết thông báo";
    Layout = "_AcademicAffairsLayout";
}

@section Styles {
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />
    <link rel="stylesheet" href="~/css/details-news.css" />

    <style>
        /* Overlay toàn màn hình */
        #imageOverlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: none; /* ẩn mặc định */
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }

            /* Ảnh phóng to */
            #imageOverlay img {
                max-width: 90%;
                max-height: 90%;
                border-radius: 10px;
                transition: transform 0.3s ease;
            }

                /* Hover để zoom nhẹ */
                #imageOverlay img:hover {
                    transform: scale(1.05);
                }
    </style>
}

<div class="container-fluid mt-4 px-4">
    <!-- Nút trở lại -->
    <div class="mb-3">
        <a asp-page="/AcademicAffairs/News/ListNews" class="btn btn-outline-secondary rounded-pill px-4">
            <i class="bi bi-arrow-left"></i> Trở lại
        </a>
    </div>

    <div class="card border-0 shadow-lg p-4 position-relative">
        <a asp-page="/AcademicAffairs/News/EditNews" asp-route-id="@Model.News.NewsId"
           class="btn btn-outline-primary rounded-circle position-absolute"
           style="top: 15px; right: 15px; width: 42px; height: 42px; display: flex; align-items: center; justify-content: center;"
           title="Chỉnh sửa thông báo">
            <i class="bi bi-pencil-square"></i>
        </a>

        <!-- Tiêu đề -->
        <h2 class="fw-bold text-dark mb-3">@Html.Raw(Model.News.Title)</h2>

        <!-- Thông tin tác giả + ngày -->
        <div class="mb-4 text-muted d-flex align-items-center flex-wrap">
            <i class="me-2"></i> @Model.News.AuthorName
            <span class="mx-2">•</span>
            <i class="me-2"></i> @Model.News.PostTime?.ToString("dd/MM/yyyy")
        </div>

        <!-- Hình ảnh -->
        <div class="text-center mb-4">
            <img id="newsImage" src="@Model.News.Image" alt="Ảnh tin tức"
                 class="img-fluid rounded shadow-sm"
                 style="max-height: 400px; object-fit: cover; cursor: pointer;" />
        </div>

        <!-- Nội dung -->
        <div class="news-content fs-5 text-dark lh-lg">
            @Html.Raw(Model.News.NewsContent)
        </div>
    </div>
</div>

<!-- Overlay để phóng to ảnh -->
<div id="imageOverlay">
    <img src="" alt="Zoomed Image" />
</div>

@section Scripts {
    <script>
        const newsImage = document.getElementById('newsImage');
        const overlay = document.getElementById('imageOverlay');
        const overlayImg = overlay.querySelector('img');

        // Click vào ảnh nhỏ để mở overlay
        newsImage.addEventListener('click', () => {
            overlay.style.display = 'flex';
            overlayImg.src = newsImage.src;
        });

        // Click vào overlay để đóng
        overlay.addEventListener('click', () => {
            overlay.style.display = 'none';
        });
    </script>
}
